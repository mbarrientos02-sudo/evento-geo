<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Convivencia con Geo</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        :root {
            --primary: #2c3e50;
            --accent: #e67e22;
            --bg: #f4f7f6;
        }
        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            margin: 0; padding: 0; background: var(--bg); color: #333; text-align: center;
        }
        .container { max-width: 500px; margin: auto; background: white; padding: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .hero-img { width: 150px; height: 150px; border-radius: 50%; object-fit: cover; border: 4px solid var(--primary); margin-top: 20px; }
        h1 { color: var(--primary); margin-bottom: 5px; }
        .info-box { background: #f9f9f9; padding: 15px; border-radius: 10px; margin: 20px 0; border-left: 5px solid var(--primary); text-align: left; }
        .menu-img { width: 100%; border-radius: 10px; margin: 15px 0; }
        .btn {
            display: inline-block; background: #25d366; color: white; padding: 15px 25px;
            text-decoration: none; border-radius: 30px; font-weight: bold; margin: 10px 5px; cursor: pointer; border: none; font-size: 16px;
        }
        .btn-waze { background: #33ccff; }
        .form-group { margin: 20px 0; text-align: left; }
        input { width: 100%; padding: 12px; margin-top: 8px; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; }
        #ticket { display: none; border: 2px dashed #999; padding: 20px; margin-top: 20px; background: #fff; }
        .price-notice { font-size: 1.2em; font-weight: bold; color: #c0392b; margin: 15px 0; }
        #qrcode { display: flex; justify-content: center; margin: 20px 0; }
        .counter { font-weight: bold; color: var(--accent); }
    </style>
</head>
<body>

<div class="container">
    <img src="https://i.ibb.co/pPz8qL9/geo-photo.jpg" alt="Geo" class="hero-img">
    
    <h1>Convivencia con Geo</h1>
    <p>¬°Est√°s cordialmente invitado!</p>

    <div class="info-box">
        <strong>üìÖ Fecha:</strong> Lunes 19 de enero, 2026<br>
        <strong>‚è∞ Hora:</strong> 7:00 p.m.<br>
        <strong>üìç Direcci√≥n:</strong> Lote 4-5, Residenciales Maya, Zona 18<br>
        <strong>üë• Cupo Restante:</strong> <span class="counter" id="cupo">40</span> / 40
    </div>

    <a href="https://www.google.com/maps/search/?api=1&query=14.673417,-90.458558" target="_blank" class="btn">Abrir Google Maps</a>
    <a href="https://waze.com/ul?ll=14.673417,-90.458558&navigate=yes" target="_blank" class="btn btn-waze">Abrir en Waze</a>

    <hr>

    <h3>Men√∫ de la Noche</h3>
    <img src="https://images.unsplash.com/photo-image-placeholder-steak-veggies" alt="Plato Fuerte" class="menu-img">
    <p><em>Carne de res asada con salsa cremosa de champi√±ones (Strogonoff), acompa√±ada de arroz con ma√≠z dulce y vegetales salteados a la vinagreta.</em></p>

    <div class="price-notice">
        [1 cena gratis por invitado, si desea repetir el plato tendr√° un costo de Q75.00]
    </div>

    <div id="registration-form">
        <h3>Reg√≠strate para obtener tu Ticket</h3>
        <div class="form-group">
            <label>Nombre Completo:</label>
            <input type="text" id="guest-name" placeholder="Ej. Juan P√©rez">
        </div>
        <div class="form-group">
            <label>Primeros 4 d√≠gitos de tu WhatsApp:</label>
            <input type="number" id="guest-wa" placeholder="Ej. 5501">
        </div>
        <button class="btn" style="background: var(--primary);" onclick="generateTicket()">Generar mi Ticket</button>
    </div>

    <div id="ticket">
        <h2 style="color:var(--accent)">üéüÔ∏è TICKET DE COMIDA</h2>
        <p><strong>Invitado:</strong> <span id="display-name"></span></p>
        <div id="qrcode"></div>
        <p style="font-size: 0.8em;">Este c√≥digo es de un solo uso para control de merienda.</p>
        <p><strong>El Total ser√° enviado al organizador: +502 36574097</strong></p>
        <button class="btn" onclick="sendToOrganizer()">Confirmar Asistencia v√≠a WhatsApp</button>
    </div>
</div>

<script>
    // Simulaci√≥n de cupo (En un sitio real se usar√≠a una base de datos)
    let count = localStorage.getItem('attendees') || 0;
    document.getElementById('cupo').innerText = 40 - count;

    function generateTicket() {
        const name = document.getElementById('guest-name').value;
        const wa = document.getElementById('guest-wa').value;

        if (!name || wa.length < 4) {
            alert("Por favor ingresa tu nombre y los primeros 4 d√≠gitos de tu WhatsApp.");
            return;
        }

        if (count >= 40) {
            alert("Lo sentimos, el cupo de 40 personas est√° lleno.");
            return;
        }

        // Mostrar Ticket
        document.getElementById('registration-form').style.display = 'none';
        document.getElementById('ticket').style.display = 'block';
        document.getElementById('display-name').innerText = name;

        // Generar QR √önico (Nombre + WA + Timestamp)
        const qrContent = `INVITADO: ${name} | ID: ${wa}-${Date.now()}`;
        new QRCode(document.getElementById("qrcode"), {
            text: qrContent,
            width: 180,
            height: 180
        });

        // Actualizar contador local
        count++;
        localStorage.setItem('attendees', count);
    }

    function sendToOrganizer() {
        const name = document.getElementById('guest-name').value;
        const wa = document.getElementById('guest-wa').value;
        const message = `¬°Hola Geo! Confirmo mi asistencia. Mi nombre es ${name} (WA: ${wa}...). Total de asistentes registrados: ${count}. [1 cena gratis por invitado, si desea repetir el plato tendr√° un costo de Q75.00]`;
        
        const url = `https://wa.me/50236574097?text=${encodeURIComponent(message)}`;
        window.open(url, '_blank');
    }
</script>

</body>
</html>
